<html lang="en"><head>
	<script src = 'http://code.jquery.com/jquery-1.12.1.min.js'/>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
	
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>jQuery UI Draggable - Default functionality</title>

	<link rel="stylesheet" href="css/style.css">
	
	<style>
	body
	{
		background-color: #000000;
	}
	#draggable { height: 60px; width: 60px; ; padding: 0.5em; background:transparent; border:transparent;}
	
	#resizable { width: 310px; height: 160px; padding: 0.5em; }

	html, body, #container { height: 100%; }
	#container { height: 100%; }

	.ui-widget-content {
		border: 1px solid #ffffff;
		background: #ffffff;
		color: #222222;
	}
	
	#content { padding-bottom: 3em; }
	
	#mask {
		position:absolute;
		top:0;
		width:0;
		margin:0;
		padding:0;
		width:100%;
		height:100%;
		display:none;
	}
	
	img {
    -webkit-filter: grayscale(100%); /* Safari 6.0 - 9.0 */
    filter: grayscale(100%);

	}
	
	</style>
	
	<style>
	.show { display: block; }
	</style>
	<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
	<script>
	$( function() {
		$( "#draggable" ).draggable({ iframeFix: true });
		$("#draggable").on('click', function(){
			window.console.log($(this).attr("id"));
			var element = document.getElementById($(this).attr("id"));
			if(testDelete == true) {
				element.parentNode.removeChild(element);
			}
		});
	} );
	</script>
	
	<script>
	$(function(){
		$("#resizable").resizable({
			start: function(event, ui) { 
			   $("#mask").css("display","block");
			},
			stop: function(event, ui) {
			   $("#mask").css("display","none");
			}
		});
		$("#resizable").on('click', function(){
			window.console.log($(this).attr("id"));
			var element = document.getElementById($(this).attr("id"));
			if(testDelete == true) {
				element.parentNode.removeChild(element);
			}
		});
	});
	$( function() {
		$( "#draggable" ).draggable();
		$("#postIt").draggable({
			handle:  '.topBar',
		});
		$('#postIt').on('click', function(){
			window.console.log($(this).attr("id"));
			var element = document.getElementById($(this).attr("id"));
			if(testDelete) {
				element.parentNode.removeChild(element);
			}
		});
	} );
	$( function() {
		$( "#textMake" ).draggable();
		
		$('#textMake').on('click', function(){
			window.console.log($(this).attr("id"));
			var element = document.getElementById($(this).attr("id"));
			if(testDelete) {
					element.parentNode.removeChild(element);
			}
		});
	} );
	</script>
</head>

<div id = "menuButton" style="position: absolute; left: 10px; top: 10px;"> 
    <img src='assets/menu.png' width="50" height="50" onclick = "disDrop(menuDrop);"/>
	<div id="menuDrop" style="display: none;">
		<div id = "signInButton" > 
			<img src='assets/signIn.png' />
		</div>
		<div id = "logOutButton" > 
			<img src='assets/logOut.png' />
		</div>
	</div>
</div>

<div id = "newTab" style="position: absolute; left: 100px; top: 10px;" onclick ="duplicate();useID();"> 
    <img src='assets/newTab.png' width="50" height="50"/>	
</div>

<div id="buttontext" style="position: absolute; left: 100px; top:60px; border: transparent;">
		<form>
		<input id="textbox" type="text" name="URL" style="border: transparent;">
		</form>
</div>

<div id = "saveButton" style="position: absolute; left: 150px; top: 10px;"> 
    <img src='assets/save.png' width="50" height="50"/>
</div>

<div id = "editModeButton" style="position: absolute; left: 275px; top: 10px;"> 
    <img src='assets/editMode.png' width="50" height="50" onclick = "edDrop(editDrop);"/>
	<div id="editDrop" style="display: none;">
		<div id = "textButton" > 
			<img src='assets/newText.png' width="50" height="50" onclick = "makeText();"/>
		</div>
		<div id = "editTextButton" > 
			<img src='assets/editText.png' width="50" height="50" onclick = "displayTextBoxes()"/>
		</div>
		<div id = "newListButton" > 
			<img src='assets/newList.png' width="50" height="50"/>
		</div>
	</div>
</div>

<div id = "deleteButton" style="position: absolute; left: 400px; top: 10px;"> 
    <img id = "deleteImg1" src='assets/delete.png' width="50" height="50" onclick = "toggleDelete();"/>
	<img id = "deleteImg2" src='assets/deleteActive.png' width="50" height="50" style="display:none" onclick = "toggleDelete();"/>
</div>

<body style="cursor: auto;">

<div id="draggable" class="ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 673px; top: 280px;">
	<div style = "height: 60px; width: 60px; position: relative; ">
		<img src= 'assets/hexBorder.png' alt="" style = "height: 75px; width: 75px; position: absolute;" ondblclick = 'myfunc(resizable)'/>
		<img src= 'http://google.com/favicon.ico' alt="" style="height: 42px; width: 42px; position:absolute; left:16px; top:5px" ondblclick = 'myfunc(resizable)'/>
		<input type="text" style ="font-size: 10px; width:75px; position:absolute; top:50; background:transparent; border:transparent; color:white; text-align:center" maxlength = "6">
	</div>
	<div id="resizable" style="display:none;">
		<iframe id="myiFrame" src="http://example.com" style="width:100%; height:100%	;"></iframe>
		<div id="mask"></div>
	</div>
</div>


<div id="postIt" style="position:absolute; left: 300px; top: 300px;">
  <div class=topBar></div>
  <div class=noteForm>
    <div contenteditable class=textAria>
      Hello, <b>Edit Me First</b> Then Drag & Drop me.
    </div>
  </div>
</div>

<div id="textMake" style="position:absolute; left: 380px; top: 180px; border: transparent;">
  <input id="textMakeBox" type="text" name="tex" style ="font-size: 15px; border: transparent;">
</div>

</body>
<script>
var testDelete = false;
function toggleDelete() {
	if(testDelete == false) {
		testDelete = true;
		$(deleteImg1).hide();
		$(deleteImg2).show();
	}
	else {
		testDelete = false;
		$(deleteImg2).hide();
		$(deleteImg1).show();
	}
}

var dis = 0;
var sid = 0;
function disDrop(id){
	dis += 1;
	if(dis % 2 == 1){
		$(id).show();
	}
	else $(id).hide();
}
function edDrop(id){
	sid += 1;
	if(sid % 2 == 1){
		$(id).show();
	}
	else {
	$(id).hide();
	var x = document.getElementsByTagName("INPUT");
	for (var i=0; i < x.length; i++)
		if(x[i].type == "text")
		{
			if (x[i].parentNode.parentNode.id.substring(0,9) == "draggable" && x[i].style.border != "transparent")
				x[i].style.border = "transparent";
			else
				x[i].parentNode.style.border = "transparent";
		}
	}
}
var highlightBox = false;
function displayTextBoxes(){
	var x = document.getElementsByTagName("INPUT");
	if(highlightBox == true) {
		highlightBox = false;
	}
	else {
		highlightBox = true;
	}
	//window.console.log(x);
	for (var i=0; i < x.length; i++)
	
	{
		if(x[i].type == "text")
		{
			window.console.log("PARENT:");
			window.console.log(x[i].parentNode.id);
			window.console.log("CHILD:");
			window.console.log(x[i].id);
			if (x[i].parentNode.id.substring(0,8) == "textMake" && x[i].parentNode.style.border == "transparent") //label hightlight
			{
				window.console.log("HIGHLIGHT textMake");
				x[i].parentNode.style.border = "7px solid green";
			//	highlightBox = true;
			}
			else if (x[i].parentNode.parentNode.id.substring(0,9) == "draggable" && x[i].style.border == "transparent") //hexagon highlight
			{
				
				x[i].style.border = "5px solid green";
			//	highlightBox = true;
			}
			else if (x[i].parentNode.parentNode.id.substring(0,9) == "draggable" && x[i].style.border != "transparent") //hexagon unhighlight
			{	
				window.console.log("hexagon unhighlight");
				x[i].style.border = "transparent";
			//	highlightBox = false;
			}
			else if (x[i].parentNode.id.substring(0,8) == "textMake" && x[i].parentNode.style.border != "transparent")
			{	
				window.console.log("UNHIGHLIGHT textMake");
				x[i].parentNode.style.border = "transparent";
			//	highlightBox = false;
			}
		}
//		window.console.log(highlightBox);
		}
	window.console.log(highlightBox);
	//window.console.log(x[i].parentNode.parentNode.id.substring(0,9));
}

</script>
<script>

function myfunc(id){
	window.console.log(id);
	window.console.log(id.style.display);
	
	if(id.style.display == 'none'){
		$(id).show();
	}
	else 
		$(id).hide();
	
}


document.getElementById('newTab').onclick = duplicate;

document.getElementById('newListButton').onclick = makeNote;

var i = 0;
var original = document.getElementById('draggable');


function duplicate() {
	var cloneID = "draggable" + ++i;
	var clone = document.createElement("div");
	document.body.appendChild(clone);
	window.console.log(clone.outerHTML);
//	clone.outerHTML = "<div id='" + cloneID + "' class= 'ui-widget-content ui-draggable ui-draggable-handle' style='position: relative; left: 673px; top: 280px; height: 60px; width: 60px; ; padding: 0.5em; background:transparent; border:transparent;'> </div>"
	var newURL = document.getElementById('textbox').value;
	if(newURL == '')
		newURL = 'example.com';
	if(newURL.substring(0,4) != 'http'){
		newURL = 'http://' + newURL;
	}
	
	var test = new Image();
	test.src = "http://" + newURL.split('/')[2].concat("/favicon.ico");
//	window.console.log(test.src);

	if(!test.complete || test.naturalHeight == 0)
		test.src = 'http://google.com/favicon.ico';
	
	var inner = "<div id='" + cloneID + "' class= 'ui-widget-content ui-draggable ui-draggable-handle' style='position: relative; left: 673px; top: 280px; height: 60px; width: 60px; ; padding: 0.5em; background:transparent; border:transparent;'> "
				+ "<div style = 'height: 60px; width: 60px; position: relative; '> "
				+ "<img src= 'assets/hexBorder.png' alt='' style = 'height: 75px; width: 75px; position: absolute;' ondblclick = 'myfunc(resizable" + i + ")'/>"
				+ "<img src= '" + test.src + "' alt='' style='height: 42px; width: 42px; position:absolute; left:16px; top:5px;' ondblclick = 'myfunc(resizable" + i + ")'/></div>"
				+ "<input type='text' style ='font-size: 10px; width:75px; position:absolute; top:57; background:transparent; border:transparent; color:white; text-align:center' maxlength = '6'>"
				+ " <div id='resizable" + i + "' style='width: 310px; height: 160px; padding: 0.5em; display:none;'> <iframe id='" 
				+ "myiFrame" + i
				+  "' src='http://example.com' style='width:100%; height:100%;'></iframe> <div id='mask" + i
				+ "'></div> </div>"
				+ "</div>";
	clone.outerHTML = inner;
	
//	window.console.log(inner);
//	window.console.log(document.getElementById("myiFrame" + i));
//	window.console.log(document.getElementById(clone.id).innerHTML);
//	document.body.appendChild(clone);
	document.getElementById("myiFrame" + i).src = newURL;
	
	$(function() {
		$("#".concat(cloneID)).draggable({iframeFix: true});
		$("#".concat(cloneID)).on('click', function(){
			window.console.log($(this).attr("id"));
			var element = document.getElementById($(this).attr("id"));
			if(testDelete == true) {
				element.parentNode.removeChild(element);
			}
		});
	} );
	

	$(function(){
		$("#resizable".concat(i)).resizable({
			start: function(event, ui) { 
			   $("#mask".concat(i)).css("display","block");
			},
			stop: function(event, ui) {
			   $("#mask".concat(i)).css("display","none");
			}
		});
	});
	
   window.console.log(clone);
}

var initNote = document.getElementById('postIt');
var noteNum = 0;

function makeNote() {
	var newNote = document.createElement('div');
	var newNoteID = "postIt" + ++noteNum;
	document.body.appendChild(newNote);
//	newNote.id = newNoteID;
//	initNote.parentNode.appendChild(newNote);
//	window.console.log(document.getElementById(initNote.id).outerHTML);
//	window.console.log("INNER^OUTERv");
//	window.console.log(document.getElementById(initNote.id).innerHTML);
	var inner = "<div id= '" + newNoteID+ "' style='position:absolute; left: 300px; top: 300px;'> <div class=topBar></div> <div class=noteForm> <div contenteditable class=textAria>  </div> </div> </div>";
	newNote.outerHTML = inner;
//	window.console.log(inner);
//	window.console.log(newNote.style.left);
	newNote.style.left = "200px";
	newNote.style.top = "200px";
//	document.body.appendChild(newNote);
  $(function() {
		$("#".concat(newNoteID)).draggable({
			handle:  '.topBar',
		});
		$("#".concat(newNoteID)).on('click', function(){
			window.console.log($(this).attr("id"));
			var element = document.getElementById($(this).attr("id"));
			if(testDelete == true) {
				element.parentNode.removeChild(element);
			}
		});
	} );
}

var initText = document.getElementById('textMake');
var textNum = 0;
function makeText() {
	var newTex = document.createElement("div");
	var newTexID = "textMake" + ++textNum;
	document.body.append(newTex);
//	initText.parentNode.appendChild(newTex);
	//<div id="textMake" style="position:absolute; left: 380px; top: 180px; border-style: solid; border-width: 5px;">
//  <input id="textMakeBox" type="text" name="tex" style ="font-size: 15px">
//</div>
	

	var inner = "<div id='" + newTexID + "' style='position:absolute; left: 380px; top: 180px; border: transparent;' class='ui-draggable ui-draggable-handle'>" 
				+"<input id=textMakeBox type=text name=tex style ='font-size: 15px; border: transparent;'>";
				+"</div>";
	newTex.outerHTML = inner;
	//document.getElementById(newTex.id).innerHTML = inner;
//	window.console.log(inner);
//	window.console.log(newTex.style.left);
	document.getElementById(newTexID).style.left = "200px";
	document.getElementById(newTexID).style.top = "200px";
	if(highlightBox == true){
//		window.console.log(newTexID);
		document.getElementById(newTexID).style.border = "7px solid green";
	}
	
	
  $(function() {
		$("#".concat(newTexID)).draggable();
		$("#".concat(newTexID)).on('click', function(){
			//window.console.log($(this).attr("id"));
			var element = document.getElementById($(this).attr("id"));
			
			if(testDelete == true) {
					element.parentNode.removeChild(element);
			}
		});
	} );

}

function useID(e) {   
//    alert(e.id);
	window.console.log("AHHH");
	window.console.log(e.id);
}
</script>
</html>

